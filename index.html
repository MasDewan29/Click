<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maafin Aku Ya Sayang.. ü§ç</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@300;400;600&family=Montserrat:ital,wght@0,300;1,400&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

    <style>
        :root {
            --pink-soft: #ffdee9;
            --blue-soft: #b5fffc;
            --accent: #ff758c;
            --deep: #4b4b4b;
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="%23ff758c"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>'), auto;
        }

        body {
            background: linear-gradient(135deg, var(--pink-soft), var(--blue-soft));
            height: 100vh; overflow: hidden;
            font-family: 'Poppins', sans-serif;
            color: var(--deep);
            display: flex; align-items: center; justify-content: center;
        }

        .container {
            width: 90%; max-width: 450px;
            text-align: center;
            position: relative; z-index: 10;
        }

        section { display: none; opacity: 0; padding: 20px; transition: 0.5s; }
        section.active { display: block; opacity: 1; }

        h1 { font-family: 'Pacifico', cursive; color: var(--accent); font-size: 2rem; margin-bottom: 20px; }
        p { font-size: 0.95rem; line-height: 1.6; font-weight: 400; }

        .btn {
            background: var(--accent); color: white; border: none;
            padding: 14px 28px; border-radius: 50px;
            font-weight: 600; margin-top: 20px; transition: 0.3s;
            box-shadow: 0 4px 15px rgba(255, 117, 140, 0.3);
            cursor: pointer; font-size: 0.8rem;
        }
        .btn:hover { transform: scale(1.05); }

        /* --- CAMERA & LOVE FILTER --- */
        .cam-frame {
            width: 260px; height: 340px; background: #000; margin: 20px auto;
            border-radius: 25px; border: 5px solid white; overflow: hidden; position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        video, #captured-img { width: 100%; height: 100%; object-fit: cover; }
        
        /* Efek Emot Love di Atas Foto */
        .love-overlay {
            position: absolute; inset: 0; pointer-events: none;
            display: none; justify-content: center; align-items: center;
            font-size: 2rem; z-index: 5;
        }

        /* --- GAME & LETTER --- */
        .heart-game { height: 150px; margin: 20px 0; border: 2px dashed #fff; border-radius: 20px; position: relative; overflow: hidden; }
        .envelope { width: 130px; height: 85px; background: #fff; margin: 30px auto; border-radius: 0 0 10px 10px; position: relative; border: 1px solid #eee; cursor: pointer; }
        .envelope::after { content: ''; position: absolute; top: -75px; left: 0; border-left: 65px solid transparent; border-right: 65px solid transparent; border-bottom: 75px solid #fcfcfc; }
        .paper { background: #fff; padding: 30px 20px; text-align: left; border-left: 4px solid var(--accent); font-family: 'Montserrat', sans-serif; }
        
        #cat-hug-img { width: 180px; border-radius: 15px; margin-top: 15px; display: none; opacity: 0; }
        #bg-hearts { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
    </style>
</head>
<body>

    <canvas id="bg-hearts"></canvas>

    <div class="container">
        
        <section id="s0" class="active">
            <h1>Halo Sayang.. üì∏</h1>
            <p>Scan wajah dulu ya buat mastiin bidadari aku yang buka web ini. ‚ù§Ô∏è</p>
            <button class="btn" onclick="startCamera()">MULAI SCAN</button>
        </section>

        <section id="s01">
            <div class="cam-frame" id="frame">
                <video id="video" autoplay playsinline></video>
                <img id="captured-img" style="display:none">
                <div class="love-overlay" id="loves">üíñ‚ú®ü•∞</div>
            </div>
            <p id="status-text">Mendeteksi tingkat kecantikan...</p>
        </section>

        <section id="s1">
            <h1 style="color: #e74c3c;">TERVERIFIKASI! ‚ö†Ô∏è</h1>
            <p>Hasil: <b>Cantiknya Keterlaluan.</b> ‚ù§Ô∏è<br>Jangan senyum-senyum ya, nanti tambah manis.</p>
            <button class="btn" onclick="nextPage(1, 2)">LANJUT üò§</button>
        </section>

        <section id="s2">
            <h1>Teka-Teki Cepat üß†</h1>
            <p>Kalau aku jadi kulkas, kamu mau jadi apa?</p>
            <button class="btn" onclick="playfulRes('pilih es')">Es Batu (Biar nempel terus)</button>
            <button class="btn" onclick="playfulRes('pilih listrik')">Listrik (Biar aku hidup)</button>
            <p id="res-playful" style="margin-top:20px; font-weight: 600; color: var(--accent);"></p>
        </section>

        <section id="s3">
            <h1>Jangan Diklik! üõë</h1>
            <p>Halaman ini terlarang, mending balik aja daripada dapet pelukan.</p>
            <button class="btn" style="background: #7f8c8d;" onclick="prank()">JANGAN DIKLIK</button>
            <p id="res-prank" style="margin-top:20px; font-style: italic;"></p>
        </section>

        <section id="s4">
            <h1>Dengerin ya.. ‚ú®</h1>
            <p id="dynamic-text" style="min-height: 80px;"></p>
            <button class="btn" id="btn-gombal" style="display:none" onclick="nextPage(4, 5)">Lanjut ‚ù§Ô∏è</button>
        </section>

        <section id="s5">
            <h1>Tangkap Hatiku ‚ù§Ô∏è</h1>
            <p>Tangkap 5 hati buat aku!</p>
            <div class="heart-game" id="game-area"></div>
            <p id="game-status">Hati: 0/5</p>
        </section>

        <section id="s7">
            <h1>Untuk Sayangku.. ‚úâÔ∏è</h1>
            <div class="envelope" id="env" onclick="openLetter()"></div>
            <p id="env-hint">Klik amplopnya</p>
            <div id="letter" style="display:none">
                <div class="paper">
                    <p id="letter-content" style="font-size: 0.85rem; line-height: 1.7;"></p>
                    <p style="margin-top: 15px; font-weight: 600; font-size: 0.8rem; color: var(--accent);">‚Äî I Love You, Always.</p>
                </div>
                <button class="btn" onclick="nextPage(7, 8)">Halaman Terakhir</button>
            </div>
        </section>

        <section id="s8">
            <h1 id="final-h">Makasih Ya.. ü§ç</h1>
            <p id="final-p">Makasih sudah mau nunggu dan sabar sama aku.</p>
            <img id="cat-hug-img" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMThid3ZqZXd6MXZndmxpbm5qZzB6ZHJ5Y3ZidXN4cTJqNnlqN2R6NyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Vz58J8shFW6BvqnYTm/giphy.gif">
            <br>
            <button class="btn" id="btn-peluk" onclick="finalPeluk()">PELUK ONLINE ü§ç</button>
        </section>

    </div>

    <script>
        gsap.registerPlugin(TextPlugin);

        function startCamera() {
            navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } })
            .then(stream => {
                document.getElementById('video').srcObject = stream;
                nextPage(0, '01');
                setTimeout(capture, 2500);
            }).catch(() => alert("Izin kamera diperlukan!"));
        }

        function capture() {
            const v = document.getElementById('video');
            const c = document.createElement('canvas');
            c.width = v.videoWidth; c.height = v.videoHeight;
            c.getContext('2d').drawImage(v, 0, 0);
            document.getElementById('captured-img').src = c.toDataURL();
            document.getElementById('captured-img').style.display = 'block';
            v.style.display = 'none';
            
            // Efek Love Muncul di Foto
            const overlay = document.getElementById('loves');
            overlay.style.display = 'flex';
            animateLoves();
            
            document.getElementById('status-text').innerHTML = "<b>SCAN SELESAI!</b> Bidadari Terdeteksi. üòç";
            v.srcObject.getTracks().forEach(t => t.stop());
            setTimeout(() => nextPage('01', 1), 3000);
        }

        function animateLoves() {
            for(let i=0; i<10; i++) {
                let e = document.createElement('div');
                e.innerHTML = "‚ù§Ô∏è";
                e.style.position = "absolute";
                e.style.left = Math.random() * 100 + "%";
                e.style.top = "100%";
                document.getElementById('frame').appendChild(e);
                gsap.to(e, { y: -300, opacity: 0, duration: 2, delay: Math.random() });
            }
        }

        function nextPage(from, to) {
            gsap.to(`#s${from}`, { opacity: 0, duration: 0.5, onComplete: () => {
                document.getElementById(`s${from}`).classList.remove('active');
                const n = document.getElementById(`s${to}`);
                n.classList.add('active');
                gsap.to(n, { opacity: 1, duration: 1 });
                if(to === 4) startGombal();
                if(to === 5) startGame();
            }});
        }

        function playfulRes(t) {
            document.getElementById('res-playful').innerText = t === 'pilih es' ? "Biar nempel terus kayak es batu ya!" : "Cinta kita jangan padam ya.";
            setTimeout(() => nextPage(2, 3), 2000);
        }

        function prank() {
            document.getElementById('res-prank').innerText = "Bandel ya dibilangin! Tapi aku sayang. ‚ú®";
            setTimeout(() => nextPage(3, 4), 2500);
        }

        function startGombal() {
            const lines = ["Sayang..", "Aku tau aku bukan yang terbaik.", "Sering bikin kamu nunggu..", "Tapi kamu rumah paling nyaman buat aku. üòä"];
            let tl = gsap.timeline();
            lines.forEach(l => tl.to("#dynamic-text", { duration: 2, text: l }, "+=0.8"));
            tl.to("#btn-gombal", { display: 'inline-block', opacity: 1 });
        }

        let score = 0;
        function startGame() {
            const area = document.getElementById('game-area');
            function spawn() {
                if(score >= 5) return nextPage(5, 7);
                const h = document.createElement('div');
                h.innerHTML = "‚ù§Ô∏è";
                h.style.cssText = `position:absolute; left:${Math.random()*80}%; top:${Math.random()*60}%; cursor:pointer; font-size:1.5rem;`;
                h.onclick = () => { score++; document.getElementById('game-status').innerText=`Hati: ${score}/5`; h.remove(); spawn(); };
                area.appendChild(h);
            }
            spawn();
        }

        function openLetter() {
            gsap.to("#env", { y: 30, opacity: 0 });
            document.getElementById('letter').style.display = 'block';
            const msg = "Maafin aku ya sayang.. Aku sadar aku sering banget buat kamu merasa kesepian, bahkan sampai bikin kamu ngerasa ga punya temen karena aku terlalu ambisius ngejar bisnis sampai lupa waktu. Maafin aku juga yang selalu ngeropotim kamu perihal tugas-tugas aku dan suka ga ada waktu buat kamu. Makasih udah bertahan sesabar ini.. Selamat masuk kuliah ya sayang! Semangat belajarnya, aku sayang kamu! ‚ù§Ô∏è";
            gsap.to("#letter-content", { duration: 12, text: msg, ease: "none" });
        }

        function finalPeluk() {
            const cat = document.getElementById('cat-hug-img');
            cat.style.display = 'inline-block';
            gsap.to(cat, { opacity: 1, duration: 1 });
            document.getElementById('btn-peluk').style.display = 'none';
            for(let i=0; i<30; i++) setTimeout(createHeart, i * 150);
        }

        function createHeart() {
            const h = document.createElement('div');
            h.innerHTML = "ü§ç";
            h.style.cssText = `position:fixed; left:${Math.random()*100}vw; top:110vh; font-size:${Math.random()*20+10}px; z-index:1;`;
            document.body.appendChild(h);
            gsap.to(h, { y: "-120vh", duration: 5, onComplete: () => h.remove() });
        }
        setInterval(createHeart, 1500);
    </script>
</body>
</html>